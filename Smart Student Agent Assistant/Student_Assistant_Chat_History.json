[
  {
    "role": "system",
    "content": "You are a Smart Student Agent Assistant.\nYou help students with academic tasks like:\n- Answering subject-related questions (Math, Science, CS, etc.)\n- Explaining concepts in simple terms\n- Summarizing notes or textbook content\n- Assisting with assignments or practice problems\n- Giving study tips, definitions, and examples\n- Explaining code and programming concepts\n- Reviewing and simplifying uploaded content (like PDF notes)\n\nRespond clearly, politely, and concisely. Tailor your answers to the student\u2019s level.\nIf the question is too vague, ask for clarification. Avoid over-complicating.\nAlways be supportive and helpful."
  },
  {
    "role": "user",
    "content": "import os\r\nfrom dotenv import load_dotenv\r\nimport chainlit as cl\r\nfrom litellm import completion\r\nimport litellm\r\nimport json\r\n\r\nload_dotenv()\r\ngemini_api_key = os.getenv(&quot;GEMINI_API_KEY&quot;)\r\nif not gemini_api_key:\r\n    raise ValueError(&quot;API KEY ERROR. Please check your API key&quot;)\r\n\r\nlitellm._turn_on_debug()\r\n\r\n@cl.on_chat_start\r\nasync def on_chat_start():\r\n    cl.user_session.set(&quot;chat history&quot;, [\r\n        {\r\n            &quot;role&quot;: &quot;system&quot;,\r\n            &quot;content&quot;: (\r\n                &quot;You are a Smart Student Agent Assistant.\\n&quot;\r\n                &quot;You help students with academic tasks like:\\n&quot;\r\n                &quot;- Answering subject-related questions (Math, Science, CS, etc.)\\n&quot;\r\n                &quot;- Explaining concepts in simple terms\\n&quot;\r\n                &quot;- Summarizing notes or textbook content\\n&quot;\r\n                &quot;- Assisting with assignments or practice problems\\n&quot;\r\n                &quot;- Giving study tips, definitions, and examples\\n&quot;\r\n                &quot;- Explaining code and programming concepts\\n&quot;\r\n                &quot;- Reviewing and simplifying uploaded content (like PDF notes)\\n\\n&quot;\r\n                &quot;Respond clearly, politely, and concisely. Tailor your answers to the student\u2019s level.\\n&quot;\r\n                &quot;If the question is too vague, ask for clarification. Avoid over-complicating.\\n&quot;\r\n                &quot;Always be supportive and helpful.&quot;\r\n            )\r\n        }\r\n    ])\r\n    await cl.Message(\r\n        content=&quot;\ud83d\udcda Welcome to Smart Student Agent Assistant!\\n\\nHow can I help you today? Ask me any study-related question, concept, or topic you&#039;re stuck on!&quot;\r\n    ).send()\r\n\r\n@cl.on_message\r\nasync def on_message(message: cl.Message):\r\n    msg = cl.Message(content=&quot;Let me think...&quot;)\r\n    await msg.send()\r\n\r\n    history = cl.user_session.get(&quot;chat history&quot;) or []\r\n    history.append({&quot;role&quot;: &quot;user&quot;, &quot;content&quot;: message.content})\r\n\r\n    try:\r\n        response_stream = completion(\r\n            model=&quot;gemini/gemini-1.5-flash&quot;,\r\n            api_key=gemini_api_key,\r\n            messages=history,\r\n            custom_llm_provider=&quot;gemini&quot;,\r\n            stream=True\r\n        )\r\n\r\n        full_response = &quot;&quot;\r\n        async for chunk in response_stream:\r\n            delta = chunk.get(&quot;delta&quot;, {}).get(&quot;content&quot;, &quot;&quot;)\r\n            full_response += delta\r\n            await msg.stream_token(delta)  \r\n\r\n        msg.content = full_response\r\n        await msg.update()\r\n\r\n        history.append({&quot;role&quot;: &quot;assistant&quot;, &quot;content&quot;: full_response})\r\n        cl.user_session.set(&quot;chat history&quot;, history)\r\n\r\n    except Exception as e:\r\n        msg.content = f&quot;Error: {str(e)}&quot;\r\n        await msg.update()\r\n\r\n\r\n@cl.on_chat_end\r\nasync def on_chat_end():\r\n    history = cl.user_session.get(&quot;chat history&quot;) or []\r\n    with open(&quot;Student_Assistant_Chat_History.json&quot;, &quot;w&quot;) as f:\r\n        json.dump(history, f, indent=2)\r\n    print(&quot;Chat History Saved.&quot;)\r\n\n\nCoud you please help me to understnad this code in a basic manner"
  }
]